در این جلسه، به بررسی اپراتورهای `LIKE` و `ILIKE` می‌پردازیم. باید به خاطر داشت که این روش، یک راه حل خوب برای ساخت یک موتور جستجوی تمام‌متن کامل نیست، اما به عنوان یک ابزار پایه‌ای برای جستجوی متنی، دانستن آن ضروری است.

---

### **۱. جستجوی پایه با `LIKE` و کاراکترهای Wildcard**

اپراتور `LIKE` به شما اجازه می‌دهد تا یک الگو را در یک ستون متنی جستجو کنید. برای این کار، از کاراکترهای خاصی به نام **wildcard** استفاده می‌کنیم که مهم‌ترین آن‌ها `%` است. علامت `%` به معنای "هر تعداد کاراکتر (از صفر تا بی‌نهایت)" است.

**مثال:** پیدا کردن تمام فیلم‌هایی که کلمه `Oregon` در عنوان آن‌ها وجود دارد:
```postgresql
SELECT * 
FROM movies 
WHERE title LIKE '%Oregon%';
```

---

### **۲. حساسیت به حروف بزرگ و کوچک و راه‌حل `ILIKE`**

یک مشکل بزرگ اپراتور `LIKE` این است که به حروف بزرگ و کوچک **حساس است (case-sensitive)**. این یعنی اگر کاربر کلمه `oregon` را با حروف کوچک جستجو کند، هیچ نتیجه‌ای پیدا نخواهد شد. برای انجام یک جستجوی **غیرحساس به حروف بزرگ و کوچک (case-insensitive)**، باید از اپراتور **`ILIKE`** استفاده کنید.
```postgresql
SELECT * 
FROM movies 
WHERE title ILIKE '%Oregon%';
```
استفاده از `ILIKE` در موارد ساده‌ای مانند جستجو در ستون ایمیل، نام کاربری یا حتی عنوان، می‌تواند یک راه‌حل قابل قبول باشد.

---

### **۳. محدودیت‌های عملکردی `LIKE` و `ILIKE`**

مشکل اصلی `LIKE` و `ILIKE` زمانی آشکار می‌شود که شما بخواهید جستجو را در چند ستون (مانند `title` و `plot`) انجام دهید یا با حجم داده‌های بزرگ سروکار داشته باشید.

```postgresql
... WHERE title ILIKE '%Oregon%' OR plot ILIKE '%Oregon%'
```

همانطور که می‌بینیم، حتی روی یک جدول با تنها ۳۵,۰۰۰ ردیف، اجرای چنین کوئری‌ای می‌تواند به سرعت کند شود. این به این دلیل است که این نوع جستجو (که با `%` شروع می‌شود) معمولاً نمی‌تواند از ایندکس‌های B-Tree استاندارد به صورت بهینه استفاده کند و منجر به پیمایش کامل جدول (`table scan`) می‌شود.

---

### **۴. دیگر کاربردهای `LIKE`**

علاوه بر جستجوی "شامل بودن"، می‌توانید از `LIKE` برای پیدا کردن رشته‌هایی که با یک الگوی خاص **شروع** یا **پایان** می‌یابند نیز استفاده کنید.

*   `'%Oregon'`: رشته‌هایی که با `Oregon` شروع می‌شوند.
*   `'Oregon%'`: رشته‌هایی که با `Oregon` تمام می‌شوند.

این نوع جستجوها (به خصوص جستجوی "شروع شدن با") می‌توانند در شرایط خاصی از ایندکس B-Tree بهره ببرند.

---

### **۵. جمع‌بندی**

`LIKE` و `ILIKE` ابزارهای مفیدی برای جستجوهای متنی ساده هستند، اما برای یک سیستم full-text search واقعی، راه‌حل مناسبی محسوب نمی‌شوند و با افزایش حجم داده یا پیچیدگی کوئری، به سرعت با مشکلات عملکردی مواجه می‌شوند. در جلسات آینده، به سراغ ابزارهای تخصصی و بسیار کارآمدتر PostgreSQL برای این کار، یعنی `tsvector` و `tsquery`، خواهیم رفت.