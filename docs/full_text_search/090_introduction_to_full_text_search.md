در این بخش (module)، به بررسی قابلیت‌های **جستجوی تمام‌متن (Full-Text Search)** داخلی و استاندارد PostgreSQL می‌پردازیم.

---

### **۱. PostgreSQL در مقابل ابزارهای جستجوی تخصصی**

شاید بپرسید با وجود ابزارهای قدرتمند و تخصصی مانند Elasticsearch، Typesense یا MeiliSearch، چرا باید از قابلیت جستجوی داخلی PostgreSQL استفاده کنیم؟

پاسخ این است که اگرچه آن ابزارها بسیار عالی هستند، اما استفاده از قابلیت داخلی PostgreSQL می‌تواند به شدت **زیرساخت (stack) شما را ساده کند**.

!!! tip "توصیه کلیدی"
    تا جایی که می‌توانید، از قابلیت جستجوی تمام‌متن PostgreSQL استفاده کنید و تنها زمانی به سراغ ابزارهای خارجی بروید که PostgreSQL دیگر پاسخگوی نیازهای شما نباشد.

---

### **۲. چه زمانی PostgreSQL دیگر کافی نیست؟**

معمولاً در دو حالت، قابلیت جستجوی داخلی PostgreSQL ممکن است دیگر کافی نباشد:

1.  **مقیاس (Scale):** اگر حجم متن‌هایی که باید روی آن‌ها جستجو کنید، فوق‌العاده زیاد شود.
2.  **ویژگی‌ها و عملکرد (Features/Functionality):** اگر به قابلیت‌های پیشرفته‌تری مانند **تحمل غلط املایی (typo tolerance)** یا **جستجوی چندوجهی (faceted search)** نیاز پیدا کنید که PostgreSQL به صورت پیش‌فرض از آن‌ها پشتیبانی نمی‌کند.

تا زمانی که به این سطح از پیچیدگی نرسیده‌اید، استفاده از PostgreSQL به شما کمک می‌کند تا از پیچیدگی‌های مدیریت یک سرویس جستجوی جداگانه در امان بمانید.

---

### **۳. نقشه راه این بخش**

در این بخش، ما با مفاهیم و ابزارهای زیر برای پیاده‌سازی جستجوی تمام‌متن در PostgreSQL آشنا خواهیم شد:

*   `tsvector`
*   `tsquery`
*   رتبه‌بندی نتایج (Ranking)
*   ایندکس‌های `GIN`

---

### **۴. معرفی مجموعه داده (Dataset)**

برای مثال‌های عملی این بخش، از یک مجموعه داده شامل اطلاعات فیلم‌ها استفاده خواهیم کرد. این داده‌ها از Kaggle گرفته شده و در یک جدول به نام `movies` وارد شده‌اند.

!!! note "نحوه اضافه کردن داده های تست به دیتابیس"
    داده ها را از این [لینک](https://assets.tryhardassets.com/mp_demo_data.gz) دانلود و سپس آن را unzip کنید. برای import کردن داده ها با استفاده از tablePlus، مسیر زیر را طی کرده و فایل را انتخاب کنید.
    ```
    File > Import > From Sql dump...
    ``` 

اسکیمای این جدول شامل ستون‌هایی مانند سال انتشار (`release_year`)، عنوان (`title`)، کارگردان (`director`)، بازیگران (`cast`)، ژانر (`genre`) و خلاصه داستان (`plot`) است.

در جلسات آینده، ما تمرکز خود را بر روی جستجوی کلمات کلیدی در ستون‌های `title` و `plot` خواهیم گذاشت و یاد می‌گیریم چگونه نتایج را بر اساس معیارهای مختلف (مانند جدیدتر بودن) فیلم ها را رتبه‌بندی کنیم.